{"id":"tyr-0ql","title":"P1.4: Wire provider pipeline into tyr check","description":"Implement a provider pipeline runner and wire it into `tyr check`. The pipeline implements the full decision flow from SPEC.md:\n1. Parse `PermissionRequest`\n2. Check explicit denies via agent config -\u003e deny immediately if matched (this also serves as the hallucination guard for Phase 2 — denies are enforced before any provider runs, so no provider can override them)\n3. Run enabled providers in order (just chained-commands for now)\n4. First definitive result (`allow` or `deny`) wins\n5. No result / error -\u003e fall-through (empty output)\n\nThe pipeline runner should be reusable (P3.2 will prepend cache as a provider layer). Use the logging infrastructure from P05.2 to record the decision and which provider made it.\n\nTests: deny-listed command rejected before providers run, provider ordering respected, first-wins semantics, error -\u003e fall-through, logging records decision + provider.\n\nDepends on: P05.1, P05.2, P1.1, P1.3\nBlocks: P1.5, P2.1, P3.2","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.630223-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:15:13.048224-06:00","closed_at":"2026-02-14T15:15:13.048224-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-0ql","depends_on_id":"tyr-33c","type":"blocks","created_at":"2026-02-14T08:11:36.128851-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-0ql","depends_on_id":"tyr-g33","type":"blocks","created_at":"2026-02-14T08:11:36.296493-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-0ql","depends_on_id":"tyr-t9c","type":"blocks","created_at":"2026-02-14T08:11:36.667288-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-0ql","depends_on_id":"tyr-10l","type":"blocks","created_at":"2026-02-14T08:11:37.008747-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-0ql","depends_on_id":"tyr-du6","type":"blocks","created_at":"2026-02-14T08:23:17.472634-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-10l","title":"P1.3: Chained commands provider","description":"Implement `src/providers/chained-commands.ts` satisfying the `Provider` interface. Uses the shell parser (P1.2) to split a command, then checks each sub-command against the Claude agent config (P1.1). If every sub-command is individually allowed -\u003e approve. If any is denied -\u003e deny. Otherwise -\u003e abstain.\n\nTests: all-allowed chain -\u003e approve, one-denied chain -\u003e deny, unknown command in chain -\u003e abstain, single command pass-through.\n\nDepends on: P1.1, P1.2\nBlocks: P1.4","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.526418-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:11:28.59727-06:00","closed_at":"2026-02-14T15:11:28.59727-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-10l","depends_on_id":"tyr-t9c","type":"blocks","created_at":"2026-02-14T08:11:36.583996-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-10l","depends_on_id":"tyr-wfg","type":"blocks","created_at":"2026-02-14T08:11:36.923891-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-1pr","title":"Design permission check prompt","description":"Design and document the system/user prompt sent to the LLM for permission classification. The prompt should include: the command being evaluated, the tool name, existing allow/deny patterns from Claude config, and instructions to respond with a JSON object containing the decision (allow/deny/abstain) and a brief reason. Keep the prompt minimal to reduce latency and token cost.","status":"closed","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T21:22:52.399805-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T19:49:02.517725-06:00","closed_at":"2026-02-15T19:49:02.517725-06:00","close_reason":"Prompt was designed and implemented in buildPrompt() in src/providers/llm.ts - pattern-similarity checker framing"}
{"id":"tyr-1y7","title":"Phase 2: LLM Provider","description":"Use Claude (via subprocess) as a fallback provider for permission checks that chained-commands can't resolve.","status":"closed","priority":2,"issue_type":"epic","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.00172-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T18:51:27.741113-06:00","closed_at":"2026-02-15T18:51:27.741113-06:00","close_reason":"All Phase 2 subtasks completed: LLM provider, adversarial tests, and E2E tests","dependencies":[{"issue_id":"tyr-1y7","depends_on_id":"tyr-f81","type":"blocks","created_at":"2026-02-14T08:12:33.217485-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-1y7","depends_on_id":"tyr-g1o","type":"blocks","created_at":"2026-02-14T08:12:33.300616-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-1y7","depends_on_id":"tyr-au6","type":"blocks","created_at":"2026-02-14T08:12:33.384301-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-1zm","title":"P4.2: Decision metrics tracking","description":"Track counts: cache hits, LLM checks, denials, fall-throughs. Store in the durable cache file or alongside it. Calculate \"estimated user-effort saved\" (count of auto-approved requests).\n\nTests: counters increment correctly, metrics survive restart, effort calculation is accurate.\n\nDepends on: P4.1\nBlocks: P4.3","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:34.548028-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:11:34.548028-06:00","dependencies":[{"issue_id":"tyr-1zm","depends_on_id":"tyr-91f","type":"blocks","created_at":"2026-02-14T08:11:37.822003-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-27j","title":"Wire LLM provider into judge pipeline","description":"Update src/commands/judge.ts to instantiate the LLM provider when allowPromptChecks is true and OPENROUTER_API_KEY is set. Add it to the providers array after ChainedCommandsProvider so rule-based checks run first.","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T21:22:45.406916-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T21:22:45.406916-06:00","dependencies":[{"issue_id":"tyr-27j","depends_on_id":"tyr-ewl","type":"blocks","created_at":"2026-02-14T21:22:56.98695-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-2kd","title":"P3.4: Phase 3 E2E tests","description":"End-to-end tests for the full Phase 3 flow using the subprocess helper from P0.6: spawn tyr daemon, then pipe PermissionRequest JSON into tyr check. Verify: cache miss on first request falls through to providers, second identical request is a cache hit (faster, same result), config change evicts affected cache entries, daemon stop/start preserves no state (in-memory only).\n\nDepends on: P0.6, P3.3\nBlocks: nothing","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:27:50.873188-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:27:50.873188-06:00","dependencies":[{"issue_id":"tyr-2kd","depends_on_id":"tyr-bzs","type":"blocks","created_at":"2026-02-14T08:27:55.788091-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-2kd","depends_on_id":"tyr-ox4","type":"blocks","created_at":"2026-02-14T08:27:55.870884-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-2zp","title":"P1.5: Phase 1 E2E tests","description":"End-to-end tests for the full Phase 1 flow using the subprocess helper from P0.6: pipe a realistic `PermissionRequest` JSON into `tyr check` via stdin, verify stdout output and exit code. Cover: allowed chained command, denied command, unknown command (fall-through), malformed input.\n\nDepends on: P0.6, P1.4\nBlocks: nothing","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.73313-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:23:42.898942-06:00","closed_at":"2026-02-14T15:23:42.898942-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-2zp","depends_on_id":"tyr-bzs","type":"blocks","created_at":"2026-02-14T08:11:36.380835-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-2zp","depends_on_id":"tyr-0ql","type":"blocks","created_at":"2026-02-14T08:11:37.09435-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-33c","title":"P05.1: tyr check stdin/stdout scaffolding","description":"Implement `tyr check` to: read JSON from stdin, parse into `PermissionRequest`, and exit with empty output (fall-through). Handle malformed input gracefully (exit 0, empty output if `failOpen`; exit 2 otherwise). Add `--verbose` flag for stderr debug output.\n\nTests: valid JSON -\u003e fall-through, malformed JSON -\u003e exit 2, `--verbose` emits to stderr only.\n\nDepends on: P0.2, P0.3\nBlocks: P05.2, P1.4","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.012518-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T11:51:30.539641-06:00","closed_at":"2026-02-14T11:51:30.539641-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-33c","depends_on_id":"tyr-42k","type":"blocks","created_at":"2026-02-14T08:11:35.536775-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-33c","depends_on_id":"tyr-36p","type":"blocks","created_at":"2026-02-14T08:11:35.873668-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-36p","title":"P0.3: CLI framework \u0026 subcommand routing","description":"Add subcommand dispatch to `src/cli.ts` using a lightweight arg parser (e.g. `citty`, `cleye`, or hand-rolled). Register stubs for all subcommands: `check`, `install`, `config`, `log`. Unknown subcommands show help.\n\nTests: verify subcommand dispatch routes correctly, unknown subcommands show help.\n\nDepends on: P0.1b\nBlocks: P0.4, P0.5, P05.1, P3.1","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.613792-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T11:28:37.117843-06:00","closed_at":"2026-02-14T11:28:37.117843-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-36p","depends_on_id":"tyr-8hd","type":"blocks","created_at":"2026-02-14T08:11:34.933263-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-36p","depends_on_id":"tyr-bdv","type":"blocks","created_at":"2026-02-14T08:11:35.103869-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-42k","title":"P0.2: Define core types","description":"Define TypeScript types/interfaces in `src/types.ts`:\n- `PermissionRequest` (the hook input JSON schema)\n- `PermissionResult` (`\"allow\" | \"deny\" | \"abstain\"`)\n- `Provider` interface (`checkPermission(req: PermissionRequest): Promise\u003cPermissionResult\u003e`)\n- `AgentConfig` interface (reading an agent's permission rules)\n- `TyrConfig` (tyr's own config: `allowChainedCommands`, `allowPromptChecks`, `cacheChecks`, `failOpen`)\n\nTests: type-level tests (compile-time checks), validation tests for PermissionRequest parsing.\n\nDepends on: P0.1b\nBlocks: P0.4, P0.5, P0.6, P05.1, P1.1","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.507106-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T11:10:49.735316-06:00","closed_at":"2026-02-14T11:10:49.735316-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-42k","depends_on_id":"tyr-bdv","type":"blocks","created_at":"2026-02-14T08:11:35.020176-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-48x","title":"P0.5: tyr install subcommand","description":"Implement `tyr install [--global | --project] [--dry-run]`. Reads/merges the appropriate Claude `settings.json` to add the tyr hook configuration (the `hooks.PermissionRequest` entry from SPEC.md). Must not clobber existing hooks.\n\nTests: merges into empty settings, merges into existing hooks without clobbering, dry-run produces no side effects.\n\nDepends on: P0.2, P0.3\nBlocks: nothing (nice-to-have for onboarding, not on critical path)","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.809262-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T14:11:33.234314-06:00","closed_at":"2026-02-14T14:11:33.234314-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-48x","depends_on_id":"tyr-42k","type":"blocks","created_at":"2026-02-14T08:11:35.358651-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-48x","depends_on_id":"tyr-36p","type":"blocks","created_at":"2026-02-14T08:11:35.789696-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-4s5","title":"set up mise with node and bun","description":"Set up mise-en-place (.mise.toml) with pinned Node.js and Bun versions for the project. This ensures all contributors use the same runtime versions. Should create .mise.toml at the repo root with node and bun entries.","status":"closed","priority":0,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:13:08.729119-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:41:01.754111-06:00","closed_at":"2026-02-14T08:41:01.754111-06:00","close_reason":"Closed"}
{"id":"tyr-5x3","title":"tyr install should default to project","description":"default the tyr install command to project, not to global","status":"closed","priority":0,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-15T19:16:45.147344-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T19:48:42.86327-06:00","closed_at":"2026-02-15T19:48:42.86327-06:00","close_reason":"Closed"}
{"id":"tyr-6h9","title":"code quality check","description":"run the reviewer agent for typescript across all files in this project. create an epic and file subtasks under that for all found issues","status":"open","priority":4,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T15:39:35.650202-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:39:35.650202-06:00"}
{"id":"tyr-6se","title":"Phase 0: Project Setup \u0026 CLI Foundation","description":"Repo tooling, core types, CLI skeleton with config and install subcommands.","status":"closed","priority":1,"issue_type":"epic","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:02:36.414639-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:22:39.934998-06:00","closed_at":"2026-02-14T15:22:39.934998-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-6se","depends_on_id":"tyr-8hd","type":"blocks","created_at":"2026-02-14T08:12:31.945621-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-6se","depends_on_id":"tyr-bdv","type":"blocks","created_at":"2026-02-14T08:12:32.030691-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-6se","depends_on_id":"tyr-42k","type":"blocks","created_at":"2026-02-14T08:12:32.112843-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-6se","depends_on_id":"tyr-36p","type":"blocks","created_at":"2026-02-14T08:12:32.196113-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-6se","depends_on_id":"tyr-du6","type":"blocks","created_at":"2026-02-14T08:12:32.280413-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-6se","depends_on_id":"tyr-48x","type":"blocks","created_at":"2026-02-14T08:12:32.36441-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-6se","depends_on_id":"tyr-bzs","type":"blocks","created_at":"2026-02-14T08:12:32.448062-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-75e","title":"add uninstall command","description":"add an uninstall command, similar to install that supports global or per-project and will just uninstall the tyr hook, if it exists. if it doesn't, let the user know but still exit with exit code 0","status":"closed","priority":0,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-15T19:16:26.187962-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T19:46:57.170365-06:00","closed_at":"2026-02-15T19:46:57.170365-06:00","close_reason":"Closed"}
{"id":"tyr-8ee","title":"create a debug command","description":"create a debug subcommand, which itself has another subcommand 'claude-config' that prints out the merged claude config","status":"closed","priority":0,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T15:42:49.657185-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:50:16.897229-06:00","closed_at":"2026-02-14T15:50:16.897229-06:00","close_reason":"Closed"}
{"id":"tyr-8fc","title":"set model for claude -p","description":"always use the haiku model when invoking claude with claude -p","status":"closed","priority":0,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-15T19:05:31.325484-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T19:32:53.283131-06:00","closed_at":"2026-02-15T19:32:53.283131-06:00","close_reason":"Closed"}
{"id":"tyr-8hd","title":"P0.1a: Project bootstrap","description":"Rename package from `claude-fastpass` to `tyr`. Create `src/` directory structure. Create a bare `src/cli.ts` entry point that prints usage/help. Wire up `bin` field in `package.json` so `bun run src/cli.ts` works.\n\nDepends on: nothing\nBlocks: P0.1b, P0.3","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.302385-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:43:01.664532-06:00","closed_at":"2026-02-14T08:43:01.664532-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-8hd","depends_on_id":"tyr-4s5","type":"blocks","created_at":"2026-02-14T08:23:21.590727-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-912","title":"add a version subcommand","status":"closed","priority":4,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T14:59:35.016718-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:53:59.384654-06:00","closed_at":"2026-02-14T15:53:59.384654-06:00","close_reason":"Closed"}
{"id":"tyr-91f","title":"P4.1: Durable on-disk cache","description":"Persist the permission cache to disk (per-project). On daemon start, load from disk. On daemon stop/crash, state survives.\n\nTests: write-then-read round-trip, daemon restart restores cache, corrupt file handled gracefully.\n\nDepends on: P3.2\nBlocks: P4.2, P4.4","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:34.430463-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:11:34.430463-06:00","dependencies":[{"issue_id":"tyr-91f","depends_on_id":"tyr-mm7","type":"blocks","created_at":"2026-02-14T08:11:37.735851-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-9g8","title":"OpenRouter LLM provider","description":"Add OpenRouter as an alternative LLM backend for permission checks, alongside the claude -p subprocess approach (tyr-f81). Users choose via the llmProvider config field ('claude' or 'openrouter', default 'claude'). OpenRouter is OpenAI-compatible, potentially faster (no subprocess spawn), and gives model choice flexibility.","status":"open","priority":3,"issue_type":"epic","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T21:22:34.550449-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T21:25:57.322574-06:00","dependencies":[{"issue_id":"tyr-9g8","depends_on_id":"tyr-oht","type":"blocks","created_at":"2026-02-14T21:22:57.266283-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-9g8","depends_on_id":"tyr-r6g","type":"blocks","created_at":"2026-02-14T21:22:57.351761-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-9q6","title":"make tests concurrent","description":"for whichever tests can easily run concurrently, mark them as concurrent. If you're not sure about a test or if they cannot be concurrent, keep them as-is","status":"closed","priority":4,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T15:29:26.147879-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:58:12.157042-06:00","closed_at":"2026-02-14T15:58:12.157042-06:00","close_reason":"Closed"}
{"id":"tyr-au6","title":"P2.3: Phase 2 E2E tests","description":"End-to-end tests for the full Phase 2 flow using the subprocess helper from P0.6: verify that when chained-commands abstains, the LLM provider is consulted. Cover: LLM approves, LLM denies, LLM times out (fall-through), denied command never reaches LLM.\n\nDepends on: P0.6, P2.1\nBlocks: nothing","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:34.033288-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T18:51:03.725299-06:00","closed_at":"2026-02-15T18:51:03.725299-06:00","close_reason":"8 E2E tests covering LLM allow/deny, error fallthrough, invalid JSON, permission short-circuiting, config toggle, and code fence parsing","dependencies":[{"issue_id":"tyr-au6","depends_on_id":"tyr-bzs","type":"blocks","created_at":"2026-02-14T08:11:36.47994-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-au6","depends_on_id":"tyr-f81","type":"blocks","created_at":"2026-02-14T08:11:37.437324-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-bdv","title":"P0.1b: Tooling setup","description":"Set up linting (biome or eslint), formatting, and typechecking scripts in `package.json`. Add a `bun test` configuration. Ensure `bun run lint`, `bun run typecheck`, and `bun test` all work (even if there are no tests yet).\n\nDepends on: P0.1a\nBlocks: P0.2, P0.3, P1.2","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.401063-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:48:59.24618-06:00","closed_at":"2026-02-14T08:48:59.24618-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-bdv","depends_on_id":"tyr-8hd","type":"blocks","created_at":"2026-02-14T08:11:34.844208-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-bh3","title":"P05.3: tyr log subcommand","description":"Implement `tyr log [--last \u003cn\u003e] [--json] [--follow]`. Reads the log file and formats output. `--follow` tails the file.\n\nTests: `--last` limits output, `--json` outputs valid JSON, empty log file handled gracefully.\n\nDepends on: P05.2\nBlocks: nothing","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.212962-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T12:39:34.687869-06:00","closed_at":"2026-02-14T12:39:34.687869-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-bh3","depends_on_id":"tyr-g33","type":"blocks","created_at":"2026-02-14T08:11:36.213099-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-bh3","depends_on_id":"tyr-36p","type":"blocks","created_at":"2026-02-14T08:23:16.67198-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-bio","title":"Add zod validation for PermissionRequest parsing","description":"Replace hand-rolled parsePermissionRequest checks with zod schema validation. Define a PermissionRequest schema that validates all fields (session_id, transcript_path, cwd, permission_mode, hook_event_name, tool_name, tool_input). Update src/check.ts and ensure existing tests still pass. Add tests for edge cases (extra fields should be allowed, missing required fields should fail).","status":"closed","priority":0,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T11:57:55.327834-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T11:58:56.662425-06:00","closed_at":"2026-02-14T11:58:56.662425-06:00","close_reason":"Closed"}
{"id":"tyr-bzs","title":"P0.6: Test infrastructure","description":"Create shared test fixtures and helpers:\n- Sample `PermissionRequest` JSON payloads (valid, malformed, edge cases) as typed factory functions.\n- Mock Claude settings files (global, project, local) for agent config tests.\n- A test helper that spawns `tyr check` as a subprocess, pipes stdin, and asserts on stdout/stderr/exit code. Used by E2E tests (P1.5, P2.3).\n\nTests: verify the subprocess helper captures stdout, stderr, and exit code correctly.\n\nDepends on: P0.2\nBlocks: P1.5, P2.3","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.912542-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:22:14.34576-06:00","closed_at":"2026-02-14T15:22:14.34576-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-bzs","depends_on_id":"tyr-42k","type":"blocks","created_at":"2026-02-14T08:11:35.442476-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-con","title":"Phase 4: Persistence \u0026 Metrics","description":"Durable cache, decision metrics, and permission suggestions.","status":"open","priority":3,"issue_type":"epic","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.20327-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:11:32.20327-06:00","dependencies":[{"issue_id":"tyr-con","depends_on_id":"tyr-91f","type":"blocks","created_at":"2026-02-14T08:12:33.732186-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-con","depends_on_id":"tyr-1zm","type":"blocks","created_at":"2026-02-14T08:12:33.815039-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-con","depends_on_id":"tyr-j3v","type":"blocks","created_at":"2026-02-14T08:12:33.897551-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-con","depends_on_id":"tyr-hw1","type":"blocks","created_at":"2026-02-14T08:12:33.982632-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-con","depends_on_id":"tyr-w1b","type":"blocks","created_at":"2026-02-14T08:27:58.853877-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-dhj","title":"Add zod schema for LogEntry","description":"LogEntry in src/log.ts is a plain TypeScript interface with no runtime validation. Log entries are read back with a raw JSON.parse cast. Add a zod schema (like PermissionRequestSchema) so malformed or legacy entries are validated at read time instead of crashing at format time.","status":"closed","priority":4,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T14:40:44.33254-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:55:10.315324-06:00","closed_at":"2026-02-14T15:55:10.315324-06:00","close_reason":"Closed"}
{"id":"tyr-dnv","title":"rename check","description":"rename tyr check to tyr judge","status":"closed","priority":0,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T15:42:58.979532-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:52:47.100293-06:00","closed_at":"2026-02-14T15:52:47.100293-06:00","close_reason":"Closed"}
{"id":"tyr-du6","title":"P0.4: tyr config subcommand","description":"Implement `src/config.ts` for reading/writing tyr's own config file (`~/.config/tyr/config.json` or similar). Implement `tyr config show`, `tyr config set \u003ckey\u003e \u003cvalue\u003e`, `tyr config path`. Include defaults and validation.\n\nTests: read/write round-trip, default values, invalid key rejection, missing file creation.\n\nDepends on: P0.2, P0.3\nBlocks: nothing (not on critical path)","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.715567-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:13:43.719824-06:00","closed_at":"2026-02-14T15:13:43.719824-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-du6","depends_on_id":"tyr-42k","type":"blocks","created_at":"2026-02-14T08:11:35.272995-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-du6","depends_on_id":"tyr-36p","type":"blocks","created_at":"2026-02-14T08:11:35.704456-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-e4o","title":"Phase 3: Caching Daemon","description":"Background daemon that caches permission decisions to avoid repeated provider invocations.","status":"open","priority":3,"issue_type":"epic","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:32.102969-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:11:32.102969-06:00","dependencies":[{"issue_id":"tyr-e4o","depends_on_id":"tyr-rzx","type":"blocks","created_at":"2026-02-14T08:12:33.468898-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-e4o","depends_on_id":"tyr-mm7","type":"blocks","created_at":"2026-02-14T08:12:33.56152-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-e4o","depends_on_id":"tyr-ox4","type":"blocks","created_at":"2026-02-14T08:12:33.647492-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-e4o","depends_on_id":"tyr-2kd","type":"blocks","created_at":"2026-02-14T08:27:58.084488-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-e7g","title":"add  --no-session-persistence to claude -p command","status":"open","priority":0,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-15T20:53:50.539522-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T20:53:50.539522-06:00"}
{"id":"tyr-ei2","title":"tyr version fails","description":"tyr version fails with no such directory package.json","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T15:59:46.791139-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T18:44:46.243949-06:00","closed_at":"2026-02-15T18:44:46.243949-06:00","close_reason":"Fixed version command to not crash in compiled binaries; added shared VERSION constant with build-time injection"}
{"id":"tyr-ewl","title":"Implement OpenRouter LLM provider","description":"Create src/providers/llm.ts implementing the Provider interface. Use fetch to call OpenRouter's chat completions endpoint. Construct a structured prompt with the permission context (command, tool, existing allow/deny rules). Parse the JSON response into allow/deny/abstain. Read API key from OPENROUTER_API_KEY env var. Abstain if allowPromptChecks is false or API key is missing. Use Bun.fetch with AbortSignal for timeout handling.","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T21:22:43.361732-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T21:22:43.361732-06:00","dependencies":[{"issue_id":"tyr-ewl","depends_on_id":"tyr-mdg","type":"blocks","created_at":"2026-02-14T21:22:56.779172-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-ewl","depends_on_id":"tyr-1pr","type":"blocks","created_at":"2026-02-14T21:22:56.893198-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-f81","title":"P2.1: LLM provider implementation","description":"Implement `src/providers/llm.ts` satisfying the `Provider` interface. Invoke `claude -p` as a subprocess with a structured prompt templated with the permission set from the agent config. Parse the JSON response. Only enabled when `allowPromptChecks` is true in tyr config.\n\n**Security constraint (injection protection):** Use `Bun.spawn` with array args (no shell interpolation). Never pass user-controlled strings through a shell. This is a design requirement, not a follow-up.\n\n**Note on hallucination guard:** Explicit deny checking in P1.4's pipeline already prevents any provider (including this one) from overriding deny rules. No additional guard logic is needed here — the architecture enforces it.\n\nTests: mock subprocess to verify correct args/prompt, response parsing (valid JSON, invalid JSON, timeout), `allowPromptChecks: false` -\u003e provider abstains, verify `Bun.spawn` is called with array args (not shell string).\n\nDepends on: P1.4, P1.1\nBlocks: P2.2, P2.3","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.833955-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T18:47:54.57645-06:00","closed_at":"2026-02-15T18:47:54.57645-06:00","close_reason":"Implemented LlmProvider using claude -p subprocess with structured prompts, JSON response parsing, timeout handling, and injection-safe Bun.spawn array args","dependencies":[{"issue_id":"tyr-f81","depends_on_id":"tyr-t9c","type":"blocks","created_at":"2026-02-14T08:11:36.752001-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-f81","depends_on_id":"tyr-0ql","type":"blocks","created_at":"2026-02-14T08:11:37.183083-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-f81","depends_on_id":"tyr-du6","type":"blocks","created_at":"2026-02-14T08:23:18.370906-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-g1o","title":"P2.2: LLM provider adversarial test suite","description":"Comprehensive adversarial test suite for the LLM provider's input handling. Test with: shell metacharacters (`; rm -rf /`, backticks, `$()`), newlines, null bytes, extremely long commands, unicode edge cases, quote escaping attempts. Verify none of these result in shell injection.\n\nDepends on: P2.1\nBlocks: nothing (but must pass before any real usage)","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.934139-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T18:49:20.63085-06:00","closed_at":"2026-02-15T18:49:20.63085-06:00","close_reason":"28 adversarial tests covering shell metacharacters, injection attempts, unicode, null bytes, long inputs, and malformed LLM responses","dependencies":[{"issue_id":"tyr-g1o","depends_on_id":"tyr-f81","type":"blocks","created_at":"2026-02-14T08:11:37.352787-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-g33","title":"P05.2: Permission check logging","description":"Create a structured log writer (`src/log.ts`) that appends permission check entries (timestamp, tool, command, decision, provider, duration) to a log file (`~/.local/share/tyr/log.jsonl` or similar). Integrate into `tyr check` so every invocation is logged.\n\nTests: log entry schema validation, file creation on first write, append semantics, log rotation (if applicable).\n\nDepends on: P05.1\nBlocks: P05.3, P1.4","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.111117-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T11:54:45.674683-06:00","closed_at":"2026-02-14T11:54:45.674683-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-g33","depends_on_id":"tyr-33c","type":"blocks","created_at":"2026-02-14T08:11:36.046337-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-hw1","title":"P4.4: tyr suggest subcommand","description":"Implement `tyr suggest [--apply] [--global | --project]`. Analyze decision history to find commands that are frequently auto-approved. Suggest adding them as permanent allow rules in Claude's settings. `--apply` writes them directly.\n\nTests: suggestions based on frequency threshold, `--apply` merges into settings without clobbering, dry-run (default) produces no side effects.\n\nDepends on: P4.1, P1.1 (needs agent config reader/writer)\nBlocks: nothing","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:34.752368-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:11:34.752368-06:00","dependencies":[{"issue_id":"tyr-hw1","depends_on_id":"tyr-91f","type":"blocks","created_at":"2026-02-14T08:11:37.908727-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-hw1","depends_on_id":"tyr-t9c","type":"blocks","created_at":"2026-02-14T08:23:16.022939-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-j3v","title":"P4.3: tyr stats subcommand","description":"Implement `tyr stats [--since \u003cduration\u003e] [--json]`. Read metrics from disk and display formatted output.\n\nTests: `--since` filters correctly, `--json` outputs valid JSON, no metrics -\u003e friendly empty state.\n\nDepends on: P4.2\nBlocks: nothing","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:34.647695-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:11:34.647695-06:00","dependencies":[{"issue_id":"tyr-j3v","depends_on_id":"tyr-1zm","type":"blocks","created_at":"2026-02-14T08:11:37.993423-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-mdg","title":"Extend TyrConfig with LLM settings","description":"Add new fields to TyrConfig in src/types.ts: llmProvider ('claude' | 'openrouter', default 'claude'), llmModel (string, default 'anthropic/claude-3.5-haiku'), llmEndpoint (string, default 'https://openrouter.ai/api/v1'), llmTimeout (number, default 10). llmModel/llmEndpoint only apply when llmProvider is 'openrouter'. Update DEFAULT_TYR_CONFIG with defaults. Update isValidKey and parseValue in src/config.ts to handle the new string/number fields.","status":"closed","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T21:22:40.06833-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-15T19:50:44.299736-06:00","closed_at":"2026-02-15T19:50:44.299736-06:00","close_reason":"Closed"}
{"id":"tyr-mft","title":"tyr install should be idempotent","description":"if the tyr hook already exists, just overwrite it","status":"closed","priority":2,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T16:00:48.895178-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T17:32:59.073817-06:00","closed_at":"2026-02-14T17:32:59.073817-06:00","close_reason":"Closed"}
{"id":"tyr-mm7","title":"P3.2: In-memory permission cache","description":"Add a cache layer to the daemon that stores permission decisions keyed by (command, cwd, permission_mode). `tyr check` queries the daemon first before running providers. Cache hits skip provider execution entirely. Integrate as the first provider in the pipeline runner from P1.4.\n\nTests: cache hit returns stored decision, cache miss falls through to next provider, different keys don't collide.\n\nDepends on: P3.1, P1.4\nBlocks: P3.3, P4.1","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:34.233541-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:11:34.233541-06:00","dependencies":[{"issue_id":"tyr-mm7","depends_on_id":"tyr-0ql","type":"blocks","created_at":"2026-02-14T08:11:37.267244-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-mm7","depends_on_id":"tyr-rzx","type":"blocks","created_at":"2026-02-14T08:11:37.543962-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-nr9","title":"Phase 1: Chained Commands Provider","description":"Read Claude's permission config, parse shell commands, and auto-approve chained commands where each sub-command is individually allowed.","status":"closed","priority":1,"issue_type":"epic","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:31.900092-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:24:03.430345-06:00","closed_at":"2026-02-14T15:24:03.430345-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-nr9","depends_on_id":"tyr-t9c","type":"blocks","created_at":"2026-02-14T08:12:32.795953-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-nr9","depends_on_id":"tyr-wfg","type":"blocks","created_at":"2026-02-14T08:12:32.879522-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-nr9","depends_on_id":"tyr-10l","type":"blocks","created_at":"2026-02-14T08:12:32.964455-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-nr9","depends_on_id":"tyr-0ql","type":"blocks","created_at":"2026-02-14T08:12:33.051984-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-nr9","depends_on_id":"tyr-2zp","type":"blocks","created_at":"2026-02-14T08:12:33.134564-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-oht","title":"LLM provider E2E tests","description":"Create src/__tests__/llm-e2e.test.ts. Test the full pipeline with the LLM provider enabled via config, using a mock HTTP server (Bun.serve) to simulate OpenRouter responses. Verify allow/deny decisions flow through to HookResponse stdout.","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T21:22:49.818634-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T21:22:49.818634-06:00","dependencies":[{"issue_id":"tyr-oht","depends_on_id":"tyr-27j","type":"blocks","created_at":"2026-02-14T21:22:57.183703-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-ox4","title":"P3.3: Cache invalidation on config changes","description":"Integrate the agent config file watcher from P1.1 into the daemon. When Claude's settings change, re-evaluate cached chain-based decisions and evict invalid entries. Prompt-based entries are evicted unconditionally (too expensive to re-evaluate).\n\nTests: config change evicts affected entries, unaffected entries survive, prompt-based entries always evicted on change.\n\nDepends on: P3.2, P1.1\nBlocks: nothing","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:34.333784-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:11:34.333784-06:00","dependencies":[{"issue_id":"tyr-ox4","depends_on_id":"tyr-t9c","type":"blocks","created_at":"2026-02-14T08:11:36.839205-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-ox4","depends_on_id":"tyr-mm7","type":"blocks","created_at":"2026-02-14T08:11:37.629548-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-r6g","title":"LLM provider unit tests","description":"Create src/__tests__/llm-provider.test.ts. Mock global fetch to verify: correct endpoint/headers/body construction, response parsing (valid JSON, invalid JSON, non-200 status), timeout handling, abstain when allowPromptChecks is false, abstain when OPENROUTER_API_KEY is missing, temperature is 0 for deterministic classification.","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T21:22:47.912846-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T21:22:47.912846-06:00","dependencies":[{"issue_id":"tyr-r6g","depends_on_id":"tyr-ewl","type":"blocks","created_at":"2026-02-14T21:22:57.09402-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-rzx","title":"P3.1: tyr daemon subcommand","description":"Implement `tyr daemon start [--port \u003cport\u003e]`, `tyr daemon stop`, `tyr daemon status`. Start a lightweight HTTP/IPC server that `tyr check` can query.\n\nTests: start/stop lifecycle, status reports correctly, port conflict handling.\n\nDepends on: P0.3\nBlocks: P3.2","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:34.13412-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:11:34.13412-06:00","dependencies":[{"issue_id":"tyr-rzx","depends_on_id":"tyr-36p","type":"blocks","created_at":"2026-02-14T08:11:35.958437-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-t9c","title":"P1.1: Claude agent config reader","description":"Implement `src/agents/claude.ts` satisfying the `AgentConfig` interface. Read and merge Claude's settings from all precedence levels (global `~/.claude/settings.json`, project `.claude/settings.json`, and `.claude/settings.local.json`). Extract the set of allowed and denied command patterns. Expose a method like `isCommandAllowed(cmd: string): \"allow\" | \"deny\" | \"unknown\"`.\n\nAlso implement a file watcher that detects changes to any of the settings files and re-reads the merged config. This watcher is used by P3.3 (cache invalidation) and should emit change events.\n\nTests: precedence merging (project overrides global), pattern matching (glob, prefix), deny takes priority over allow, watcher detects file changes.\n\nDepends on: P0.2\nBlocks: P1.3, P1.4, P2.1, P3.3","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.314635-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:00:14.790381-06:00","closed_at":"2026-02-14T15:00:14.790381-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-t9c","depends_on_id":"tyr-42k","type":"blocks","created_at":"2026-02-14T08:11:35.621122-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-w1b","title":"P4.5: Phase 4 E2E tests","description":"End-to-end tests for the full Phase 4 flow using the subprocess helper from P0.6: verify durable cache survives daemon restart (stop, start, check returns cached result), metrics accumulate across requests (cache hits, LLM checks, denials counted correctly), tyr stats outputs correct aggregates, tyr suggest produces reasonable recommendations based on decision history.\n\nDepends on: P0.6, P4.2, P4.4\nBlocks: nothing","status":"open","priority":3,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:27:51.002628-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T08:27:51.002628-06:00","dependencies":[{"issue_id":"tyr-w1b","depends_on_id":"tyr-bzs","type":"blocks","created_at":"2026-02-14T08:27:57.062587-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-w1b","depends_on_id":"tyr-1zm","type":"blocks","created_at":"2026-02-14T08:27:57.146889-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-w1b","depends_on_id":"tyr-hw1","type":"blocks","created_at":"2026-02-14T08:27:57.228221-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-wfg","title":"P1.2: Shell command parser","description":"Implement `src/providers/shell-parser.ts`. Integrate `sh-syntax` to parse a shell command string into an AST and extract the list of individual \"simple commands\" (handling pipes, `\u0026\u0026`, `||`, `;`, subshells, command substitution, redirections). Extensive unit tests for edge cases (quoted strings, nested subshells, redirections like `2\u003e\u00261`).\n\nTests: pipes, `\u0026\u0026`/`||`, `;`, subshells `(cmd1; cmd2)`, command substitution `$(cmd)`, quoted strings, redirections, nested combinations.\n\nDepends on: P0.1b\nBlocks: P1.3","notes":"## Findings: sh-syntax vs mvdan-sh\n\nsh-syntax (WASM port) has a broken AST for our use case. The Go WASM bridge's mapNode() only serializes Pos/End for Cmd nodes — all type-specific fields (Op, Args, Stmts, X/Y) are lost. Confirmed by intercepting raw WASM JSON output. parse/print work for reformatting, but the AST cannot be inspected for command structure (pipes, \u0026\u0026, ||, subshells).\n\nmvdan-sh (GopherJS port of same Go library) preserves the full AST. Verified CallExpr, BinaryCmd (op 10=\u0026\u0026, 11=||, 12=|), Subshell all come through with fields intact. It also exposes syntax.Walk() and syntax.NodeType(). No TS types shipped, but we can write a thin typed wrapper.\n\nRecommendation: use mvdan-sh. It's the same underlying parser with a JS compilation that preserves struct fields. The sh-syntax PLAN.md recommendation was based on incorrect assumptions about AST fidelity.","status":"closed","priority":1,"issue_type":"task","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:33.415982-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T15:10:17.062539-06:00","closed_at":"2026-02-14T15:10:17.062539-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-wfg","depends_on_id":"tyr-bdv","type":"blocks","created_at":"2026-02-14T08:11:35.188741-06:00","created_by":"Rushy Panchal"}]}
{"id":"tyr-zf9","title":"Phase 0.5: Permission Logging","description":"tyr check receives permission requests and logs them. Validates the hook integration works end-to-end.","status":"closed","priority":1,"issue_type":"epic","owner":"panchal.rushy@gmail.com","created_at":"2026-02-14T08:11:31.793002-06:00","created_by":"Rushy Panchal","updated_at":"2026-02-14T14:10:09.245917-06:00","closed_at":"2026-02-14T14:10:09.245917-06:00","close_reason":"Closed","dependencies":[{"issue_id":"tyr-zf9","depends_on_id":"tyr-33c","type":"blocks","created_at":"2026-02-14T08:12:32.530599-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-zf9","depends_on_id":"tyr-g33","type":"blocks","created_at":"2026-02-14T08:12:32.628212-06:00","created_by":"Rushy Panchal"},{"issue_id":"tyr-zf9","depends_on_id":"tyr-bh3","type":"blocks","created_at":"2026-02-14T08:12:32.711648-06:00","created_by":"Rushy Panchal"}]}
